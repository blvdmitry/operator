# Popover

<Featured>
  Use popover to display information that needs its own layout on hover
</Featured>

<Grid>
  <CrossLink
    title="Popover"
    type="documentation"
    text="Learn more about the Popover design anatomy and best-practices"
    section="Design documentation"
    href="https://design-system.booking.com/article/bui/components/containers/popover/"
    target="_blank"
  />
</Grid>

## Usage

```jsx
import { Popover } from "@bookingcom/bui-react";
import type { PopoverProps } from "@bookingcom/bui-react";
```

Here is a basic example of a Popover

<Example name="default" />

Since popovers depend on the coordinates of underlying element - it needs a way to hook into its children event handlers.
In order to solve that issue, we're using a render props pattern for rendering inner components:

```jsx
<Popover content="Content">
  <Popover.Trigger>
    {(attributes) => (
      <button {...attributes}>Popover with native button</button>
    )}
  </Popover.Trigger>
  <Popover.Content>Popover Content</Popover.Content>
</Popover>
```

All BUI components support working with attributes, so you can use the same approach with them:

```jsx
<Popover content="Content">
  <Popover.Trigger>
    {(attributes) => <Button text="BUI Button" attributes={attributes} />}
  </Popover.Trigger>
  <Popover.Content>Popover Content</Popover.Content>
</Popover>
```

The paddings around the Content can be removed by using the `fill` prop.

<Example name="fill" />

The Popover also comes in multiple width sizes, namely `medium`, `small` and `auto`.

<Example name="sizes" />

In some use cases, we might want the popover to appear when clicked on the trigger, whereas in some other use cases we would want it to appear when hovered over the trigger. Setting the `triggerType` prop to `click` or `hover` can achieve this behavior.

<Example name="triggerTypes" />

### Using external trigger

In order to use external element to trigger and position popover, use `triggerRef` prop which accepts React `ref` as a value. Popover will manage event listeners and attributes manually.

<Example name="externalRef" />

Combining `triggerRef` with `active` prop, you can make Popover component controlled and manage `active` state manually.

<Example name="externalRefControlled" />

### Attaching to custom container

For cases when Popover has to be attached to custom container element rather that `body`, pass `containerRef` prop to Popover.

> Keep in mind, that custom container element is required to have 'relative', 'fixed' or 'absolute' position set.

<Example name="customContainer" />

## Accesibility

Close button of the popover should have an aria-label on it describing its action purpose. Can be passed down using `closeAriaLabel` prop.

Make sure to provide an `id` prop, so `aria-describedby` would be set on the trigger element.

## Properties

**Popover**:

| Name             | Type                                                                                                    | Default  | Required | Description                                                                 |
| ---------------- | ------------------------------------------------------------------------------------------------------- | -------- | -------- | --------------------------------------------------------------------------- |
| id               | `string`                                                                                                | -        | false    | Custom id override                                                          |
| children         | `ReactNode`                                                                                             | -        | true     |                                                                             |
| position         | `bottom-end`, `bottom`, `bottom-start`, `bottom-stretch`, `top-end`, `top`, `top-start`, `start`, `end` | -        | false    | Popover position                                                            |
| forcePosition    | `boolean`                                                                                               | -        | false    | Disable dynamic positioning for popover if it doesn't fit in the screen     |
| size             | `small`, `medium`, `auto`, `stretch`, string                                                            | `medium` | false    | Popover content box size                                                    |
| fill             | `boolean`                                                                                               | -        | false    | Remove popover content area padding                                         |
| hideArrow        | `boolean`                                                                                               | -        | false    | Remove arrow pointing to the trigger                                        |
| triggerType      | `hover, click`                                                                                          | -        | false    | Type of event that triggers popover                                         |
| closeAriaLabel   | `string`                                                                                                | -        | false    | Aria-label for the close button                                             |
| active           | `boolean`, `null`                                                                                       | -        | false    | Controlled property for toggling popover                                    |
| defaultActive    | `boolean`                                                                                               | -        | false    | Uncontrolled property for defining popover initial state                    |
| onOpen           | `() => void`                                                                                            | -        | false    | Open handler                                                                |
| onClose          | `() => void`                                                                                            | -        | false    | Close handler                                                               |
| onAfterOpen      | `() => void`                                                                                            | -        | false    | After-open handler: executed after animation is finished                    |
| onAfterClose     | `() => void`                                                                                            | -        | false    | After-close handler: executed after animation is finished                   |
| hideClose        | `boolean`                                                                                               | -        | false    | Hide close button?                                                          |
| lockClose        | `boolean`                                                                                               | -        | false    | Prevent popover from closing                                                |
| navigationMode   | `arrows`, `tab`, `tab-and-arrows`                                                                       | -        | false    | Keyboard navigation mode for the popover content                            |
| trapFocusMode    | `hard`, `soft`                                                                                          | -        | false    | Property to choose if focus trap should only be removed with a close button |
| zIndex           | `number`                                                                                                | -        | false    | Custom z-index value                                                        |
| disableAnimation | `boolean`, `hide`                                                                                       | -        | false    | Disable content fade-in and fade-out animation                              |
| keepMounted      | `boolean`                                                                                               | -        | false    | Do not remove popover content from DOM on close                             |
| triggerRef       | `ReactRef`                                                                                              | -        | false    |                                                                             |
| containerRef     | `ReactRef`                                                                                              | -        | false    | Custom container ref                                                        |
| positionRef      | `ReactRef`                                                                                              | -        | false    | Element used to calculate the popover position                              |

**Popover.Trigger:**

| Name                 | Type        | Default | Required | Description              |
| -------------------- | ----------- | ------- | -------- | ------------------------ |
| children(attributes) | `ReactNode` | -       | false    |                          |
| display              | `block`     | -       | false    | Render as block element? |

**Popover.Content:**

| Name     | Type        | Default | Required | Description                                      |
| -------- | ----------- | ------- | -------- | ------------------------------------------------ |
| children | `ReactNode` | -       | false    |
| title    | `ReactNode` | -       | false    | Content area title aligned with the close button |
