# Components

## Component file structure

We store our components using the same file structure across the whole project:

```
src
└── components
    └── Button
        └── tests
        │   └── Button.unit.tsx
        │   └── Button.vrt.tsx
        │   └── Button.foundry.tsx
        └── Button.tsx
        └── Button.module.css
        └── Button.types.ts
        └── Button.mdx
        └── index.ts
```

- Tests are stored together to make it easier to exclude them from the published package. They inlcude unit tests, visual regression tests and Foundry file for manual testing.
- Types are stored in a separate file to avoid having issues with recursive imports and improve readability for large components.
- Every component has an index file which exports its public API. All exports in the other file should be used only within the same component.

## Compound components

We use compound components for cases when it helps working with the underlying components data and composition of its parts.

```jsx
<Component>
  {items.map((item) => (
    <Component.Item {...item} />
  ))}
</Component>
```

- Use compound components when working with array data structures since that helps with filterting and conditional rendering of the children.
  Make sure that using compound components doesn't inroduce too much of additional complexity for the component state management.
  For example, we're using compound components in Carousel, but we're not using it in Table due to the complexities of working with data.

- Don't use compound components for children that should be rendered in a specific order.
  As a Design System team we would like to keep control over their render order and layout to be able to introduce layout changes without having to make a major release.
  For example, we use `<Alert icon={Icon}>Content</Alert>` instead of `<Alert><Alert.Icon icon={Icon} />Content</Alert>`.

## Layout utilities

Reuse layout utilities whenever possible as long as they don't introduce additional code overhead.
Reusing the utilities makes our components responsive out of the box and helps us save bundle size on the duplicated styles.
Main utilities to look for are `Stack`, `Box`, `Actionable` and `Text` but you can find documentation for all of them in the Utilities section of the documentation.

## Native HTML elements

Don't try to simulate the native HTML behaviour with custom javascript code as that's likely to affect your UI accessibility.

For example, when building custom checkbox design, we're using native `<input type="checkbox" />` element to control the state which is hidden visually.

## Responsive development

- When components provide responsive behaviour out of the box, use layout utilities that already support responsive properties or custom media queries provided by BUI React
- Components might provide public responsive API for some of its properties but supporting them means increasing the CSS bundle size. For that reason we're adding support for them on request and only for properties affecting layout. For example, we allow changing the size of the Button based on the viewport, but not its variant.

When a property is responsive, you can use object syntax to apply certain value for a certain breakpoint: `propName={{ s: propValue, m: propValue }}`.
We stick with mobile-first approach for responsive properties syntax, which means that providing value for `s` (small) viewport will apply it to `small`, `medium`, `large` and `xlarge` viewports.

## BUI Utility Layer

Utility Layer is a set of CSS properties that is supported in almost every BUI component. Together with the power of BUI Utilities like Stack, Grid, Box, Card and many others, you can create interfaces entirely with BUI toolstack, without the need to write a single CSS line.

It is very simple to use and it contains something really powerful. All supported properties can be [Responsive](#Responsive-development) and accept both BUI Spacing Tokens and custom values. Let's look at the example below:

```tsx
<Stack
  direction="row"
  gap={2}
  mixin={{
    padding: { s: 4, l: 0 },
    width: "250px",
  }}
>
  {/* Children nodes... */}
</Stack>
```

The goal is to support only the most commonly used CSS properties and not all properties:

- We aim to give you a more granular control over the BUI components, when you need just a small bit of CSS adjustments.
- We aim to reduce the need to nest components within each over to achieve simple behaviour (nesting Box in Stack for padding).

Currently, the following utilities are supported:

```ts
height?: Responsive<number | CSSLiteralValue>;
width?: Responsive<number | CSSLiteralValue>;
position?: Responsive<"static" | "relative" | "absolute" | "fixed">;
zIndex?: Responsive<0 | 1 | 2 | 3 | 4>;
inset?: Responsive<number>;
insetBlockStart?: Responsive<number>;
insetBlockEnd?: Responsive<number>;
insetInlineStart?: Responsive<number>;
insetInlineEnd?: Responsive<number>;
margin?: Responsive<number>;
marginBlockStart?: Responsive<number>;
marginBlockEnd?: Responsive<number>;
marginInlineStart?: Responsive<number>;
marginInlineEnd?: Responsive<number>;
padding?: Responsive<number>;
paddingBlockStart?: Responsive<number>;
paddingBlockEnd?: Responsive<number>;
paddingInlineStart?: Responsive<number>;
paddingInlineEnd?: Responsive<number>;
```

### Components support breakdown

- `-`: all properties are supported
- `no suppport`: component does not support Utility Layer

| Component            | Unsupported CSS props          |
| -------------------- | ------------------------------ |
| Accordion            | height                         |
| Actionable           | -                              |
| ActionBar            | padding, margin, height        |
| Alert                | padding, margin                |
| AspectRatio          | width, height                  |
| Avatar               | width, height, padding         |
| AvatarBlock          | height                         |
| Badge                | padding, height                |
| Banner               | margin, padding                |
| BottomNavigation     | padding, width, height         |
| Box                  | padding                        |
| Breadcrumbs          | padding, height                |
| Bubble               | padding, width, height         |
| BubbleContainer      | padding                        |
| BUIProvider          | `no support`                   |
| Button               | padding, margin, width, height |
| Button.Aligner       | `no support`                   |
| Calendar             | height                         |
| Card                 | margin, height                 |
| Carousel             | padding, margin, height        |
| Chip                 | padding, height                |
| CollapsedText        | height                         |
| Container            | width, padding, margin         |
| DateItem             | height                         |
| DateRange            | height                         |
| DismissibleContainer | `no support`                   |
| Divider              | padding, width, height         |
| DropdownMenu         | `no support`                   |
| EmptyState           | margin, width, height          |
| FormControl          | height                         |
| Grid                 | -                              |
| Hidden               | `no support`                   |
| HiddenVisually       | `no support`                   |
| Icon                 | padding, width, height         |
| Image                | padding, width, height         |
| InputCheckbox        | height                         |
| InputCheckboxCard    | padding, margin                |
| InputCheckboxGroup   | height                         |
| InputMultiselect     | `no support`                   |
| InputPassword        | height                         |
| InputRadio           | height                         |
| InputRadioCard       | padding, margin                |
| InputRadioGroup      | height                         |
| InputSelect          | height                         |
| InputSlider          | height                         |
| InputStepper         | height                         |
| InputSwitch          | height                         |
| InputText            | height                         |
| InputTextarea        | height                         |
| Link                 | padding, margin, width, height |
| List                 | padding, margin, height        |
| ListItem             | padding, margin, width, height |
| NavigationProgress   | height                         |
| Overlay              | `no support`                   |
| Pagination           | margin, padding, height        |
| PaginationIndicator  | width, height                  |
| Placeholder          | width, height                  |
| Popover              | `no support`                   |
| Print                | -                              |
| Rating               | width, height                  |
| ReviewScore          | width, height                  |
| ScoreBar             | height                         |
| Scrim                | `no support`                   |
| SegmentedControl     | height                         |
| SheetContainer       | `no support`                   |
| SkeletonLoader       | width, height                  |
| SliderContainer      | `no support`                   |
| Spinner              | padding, width, height         |
| Stack                | -                              |
| Tab                  | `no support`                   |
| Tab.Panel            | -                              |
| Table                | height                         |
| Text                 | height                         |
| ThemeProvider        | `no support`                   |
| Timeline             | height                         |
| Title                | height                         |
| Toast                | `no support`                   |
| Tooltip              | `no support`                   |
